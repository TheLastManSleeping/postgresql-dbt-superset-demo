# –ú–æ–¥—É–ª—å 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–ú—ã –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ –∫–æ–Ω–≤–µ–π–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –µ–≥–æ –∏ –¥–∞–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é –º–∞–∫—Ä–æ—Å–æ–≤. –ü–æ—Å–ª–µ–¥–Ω–∏–π, –Ω–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö —à–∞–≥–æ–≤ ‚Äî —ç—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ë–µ–∑ –Ω–µ–µ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –ø–æ–Ω—è—Ç–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–º, –∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –¥–∞–∂–µ –º—ã –Ω–∞—á–Ω–µ–º –∑–∞–±—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏.

**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è –æ–ø–∏—Å—ã–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π —Å –ø–æ–º–æ—â—å—é dbt.

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ö–æ–¥ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –∫–∞–∫ –∫–∞—Ä—Ç–∞ —Å–æ–∫—Ä–æ–≤–∏—â –±–µ–∑ –ª–µ–≥–µ–Ω–¥—ã –∏ —É—Å–ª–æ–≤–Ω—ã—Ö –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–π. –í—ã –≤–∏–¥–∏—Ç–µ –ø—É—Ç–∏, –Ω–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –æ–Ω–∏ –∑–Ω–∞—á–∞—Ç. `dbt docs` ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —ç—Ç—É –ª–µ–≥–µ–Ω–¥—É, –¥–µ–ª–∞—è –≤–∞—à –ø—Ä–æ–µ–∫—Ç –ø–æ–Ω—è—Ç–Ω—ã–º –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã. üó∫Ô∏è‚ú®

---

## –¢–µ–æ—Ä–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ `dbt docs`?

**dbt docs** ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è dbt, –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—á–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –ø–æ –≤–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É. –≠—Ç–æ—Ç —Å–∞–π—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã –æ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤, –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –ß—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–∞–π—Ç–∞-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏?

–°–∞–π—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ, –≤–∫–ª—é—á–∞—è:
* **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥–µ–ª—è—Ö:** –ü–æ–ª–Ω—ã–π SQL-–∫–æ–¥, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç–µ—Å—Ç—ã, —Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –∏—Ö —Ç–∏–ø—ã.
* **–û–ø–∏—Å–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤:** –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥—ã–π —Å—Ç–æ–ª–±–µ—Ü.
* **–°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∏–∑ –∫–∞–∫–∏—Ö –º–æ–¥–µ–ª–µ–π —Å–æ—Å—Ç–æ–∏—Ç —Ç–µ–∫—É—â–∞—è –∏ –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–µ–µ.
* **–ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DAG - Directed Acyclic Graph):** –°–∞–º–∞—è –º–æ—â–Ω–∞—è —á–∞—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏! –≠—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –≤—Å–µ–≥–æ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ù–∞ –Ω–µ–π –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Å–∞–º–æ–≥–æ —Å—ã—Ä–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–∏—Ç—Ä–∏–Ω—ã, —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π –º–æ–¥–µ–ª–∏ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ.



### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü—Ä–æ—Ü–µ—Å—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –∫–æ–º–∞–Ω–¥:
1.  `dbt docs generate`: dbt —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å—é –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–æ–ø–∏—Å–∞–Ω–∏—è –∏–∑ `.yml`, –∫–æ–¥ –º–æ–¥–µ–ª–µ–π, —Ç–µ—Å—Ç—ã, —Å–≤—è–∑–∏) –≤ –¥–≤–∞ JSON-—Ñ–∞–π–ª–∞ –≤ –ø–∞–ø–∫–µ `target/`: `manifest.json` –∏ `catalog.json`.
2.  `dbt docs serve`: dbt –∑–∞–ø—É—Å–∫–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ JSON-—Ñ–∞–π–ª—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 5.1: –î–æ–±–∞–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏—è

–ß—Ç–æ–±—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—ã–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π, –µ–µ –Ω—É–∂–Ω–æ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å —Å–º—ã—Å–ª–æ–º. dbt –Ω–µ –º–æ–∂–µ—Ç —Å–∞–º –ø—Ä–∏–¥—É–º–∞—Ç—å –±–∏–∑–Ω–µ—Å-–æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–∏—Ö –º–æ–¥–µ–ª–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã –¥–æ–ª–∂–Ω—ã –µ–º—É –ø–æ–º–æ—á—å.

1.  –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `models/staging/schema.yml`.
2.  –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á `description` –¥–ª—è –º–æ–¥–µ–ª–∏ `stg_yellow_tripdata` –∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –µ–µ —Å—Ç–æ–ª–±—Ü–æ–≤. –≠—Ç–æ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä—è—Å–Ω—è–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞.

```yaml
# models/staging/schema.yml

models:
  - name: stg_yellow_tripdata
    description: "–û—á–∏—â–µ–Ω–Ω—ã–µ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–µ–∑–¥–∫–∞—Ö. –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å = –æ–¥–Ω–∞ –ø–æ–µ–∑–¥–∫–∞. –í–∫–ª—é—á–∞–µ—Ç –±–∞–∑–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤. –Ø–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–∏—Ç—Ä–∏–Ω –¥–∞–Ω–Ω—ã—Ö."
    columns:
      - name: pickup_datetime # –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
        description: "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø–æ–µ–∑–¥–∫–∏."
        tests:
          - unique
          - not_null
      - name: payment_type
        description: "–ß–∏—Å–ª–æ–≤–æ–π –∫–æ–¥, –æ–±–æ–∑–Ω–∞—á–∞—é—â–∏–π –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã –ø–æ–µ–∑–¥–∫–∏ (1 - –∫–∞—Ä—Ç–∞, 2 - –Ω–∞–ª–∏—á–Ω—ã–µ –∏ —Ç.–¥.)."
        tests:
          - accepted_values:
              values: [1, 2, 3, 4] # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–∏–ø –æ–ø–ª–∞—Ç—ã - –æ–¥–∏–Ω –∏–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö
      - name: total_amount
        description: "–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞, —É–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø–∞—Å—Å–∞–∂–∏—Ä–æ–º, –≤–∫–ª—é—á–∞—è –≤—Å–µ –Ω–∞–ª–æ–≥–∏ –∏ —Å–±–æ—Ä—ã."
````

### –ó–∞–¥–∞—á–∞ 5.2: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–∞–π—Ç

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è, –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –Ω–∞—à —Å–∞–π—Ç.

1.  **–®–∞–≥ 1: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.** –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

    ```bash
     docker compose exec dbt dbt docs generate
    ```

    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `target/`.

2.  **–®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä.** –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

    ```bash
     docker compose exec dbt dbt docs serve --host 0.0.0.0
    ```

    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä –∏ –≤—ã–¥–∞—Å—Ç –≤–∞–º —Å—Å—ã–ª–∫—É (–æ–±—ã—á–Ω–æ `http://127.0.0.1:8080`).

3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

      * –ù–∞–π–¥–∏—Ç–µ –≤ —Å–ø–∏—Å–∫–µ –º–æ–¥–µ–ª–µ–π `stg_yellow_tripdata` –∏ `fct_trips`.
      * –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ `stg_yellow_tripdata` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤–∏–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏.
      * –ù–∞–π–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Lineage Graph" (–∏–ª–∏ "–ì—Ä–∞—Ñ") –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω—ã –≤–∞—à–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –º–æ–¥–µ–ª–∏. –ü–æ–∫–ª–∏–∫–∞–π—Ç–µ –ø–æ —É–∑–ª–∞–º –≥—Ä–∞—Ñ–∞.

-----

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ –æ–±—à–∏—Ä–Ω–∞—è —Ç–µ–º–∞, –∏ dbt –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ –µ–µ –æ–±–æ–≥–∞—Ç–∏—Ç—å.

  * [**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ dbt Docs**](https://docs.getdbt.com/docs/collaborate/documentation)
  * [**–ò–∑—É—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –ø—Ä–æ–µ–∫—Ç–∞**](https://docs.getdbt.com/terms/dag)
